@echo off
chcp 65001 >nul
title –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –ö–≤–æ—Ä–∫

echo.
echo ========================================
echo    –ó–ê–ü–£–°–ö –ü–†–û–ï–ö–¢–ê –ö–í–û–†–ö
echo ========================================
echo.

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Node.js
echo [1/5] –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js...
node --version >nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ùå –û–®–ò–ë–ö–ê: Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
    echo.
    echo –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Node.js:
    echo 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://nodejs.org/
    echo 2. –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ LTS –≤–µ—Ä—Å–∏—é
    echo 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä
    echo 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç –±–∞—Ç–Ω–∏–∫ —Å–Ω–æ–≤–∞
    echo.
    pause
    exit /b 1
)

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é Node.js
for /f "tokens=*" %%i in ('node --version') do set NODE_VERSION=%%i
echo ‚úÖ Node.js –Ω–∞–π–¥–µ–Ω: %NODE_VERSION%

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ npm
echo [2/5] –ü—Ä–æ–≤–µ—Ä–∫–∞ npm...
npm --version >nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ùå –û–®–ò–ë–ö–ê: npm –Ω–µ –Ω–∞–π–¥–µ–Ω!
    pause
    exit /b 1
)

for /f "tokens=*" %%i in ('npm --version') do set NPM_VERSION=%%i
echo ‚úÖ npm –Ω–∞–π–¥–µ–Ω: %NPM_VERSION%

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ package.json
echo [3/5] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞...
if not exist "package.json" (
    echo ‚ùå –û–®–ò–ë–ö–ê: package.json –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞.
    pause
    exit /b 1
)
echo ‚úÖ package.json –Ω–∞–π–¥–µ–Ω

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º node_modules
echo [4/5] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
if not exist "node_modules" (
    echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
    echo –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç...
    npm install --legacy-peer-deps
    if %errorlevel% neq 0 (
        echo ‚ùå –û–®–ò–ë–ö–ê –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!
        echo –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å: npm install --legacy-peer-deps
        pause
        exit /b 1
    )
    echo ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
) else (
    echo ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
)

:: –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo [5/5] –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞...
echo.
echo üöÄ –ó–∞–ø—É—Å–∫–∞—é —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏...
echo üì± –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000
echo.
echo –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
echo.
echo ========================================
echo.

npm run dev

pause 